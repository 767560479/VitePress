# mySql å…³é—­è‡ªå¯

<!--
 * @Description:
 * @Author: zhengfei.tan
 * @Date: 2025-12-10 19:48:32
 * @FilePath: \VitePress\docs\SQL\mySqlå…³é—­è‡ªå¯.md
-->

åœ¨ Windows 11 ä¸Šï¼ŒMySQL å®‰è£…æ—¶é»˜è®¤ä¼šè®¾ç½®ä¸º **å¼€æœºè‡ªåŠ¨å¯åŠ¨**ï¼ˆä½œä¸º Windows æœåŠ¡è¿è¡Œï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³• **å…³é—­è‡ªå¯åŠ¨**ï¼Œå¹¶åœ¨éœ€è¦æ—¶ **æ‰‹åŠ¨å¯åŠ¨æˆ–åœæ­¢ MySQL æœåŠ¡**ã€‚

---

## ğŸ”§ æ–¹æ³•ä¸€ï¼šé€šè¿‡ã€ŒæœåŠ¡ã€ç®¡ç†å™¨ï¼ˆå›¾å½¢ç•Œé¢ï¼‰

### âœ… å…³é—­ MySQL å¼€æœºè‡ªå¯

1. æŒ‰ä¸‹ `Win + R`ï¼Œè¾“å…¥ `services.msc`ï¼Œå›è½¦ã€‚
2. åœ¨æœåŠ¡åˆ—è¡¨ä¸­æ‰¾åˆ°ä½ çš„ MySQL æœåŠ¡ï¼ˆåç§°é€šå¸¸æ˜¯ï¼‰ï¼š
   - `MySQL84`
   - `MySQL80`
   - `MySQL57`
   - æˆ–ä½ å®‰è£…æ—¶è‡ªå®šä¹‰çš„åç§°ï¼ˆå¦‚ `MySQL`ï¼‰
3. å³é”®ç‚¹å‡»è¯¥æœåŠ¡ â†’ **å±æ€§**ã€‚
4. åœ¨ **â€œå¯åŠ¨ç±»å‹â€** ä¸‹æ‹‰èœå•ä¸­ï¼Œé€‰æ‹©ï¼š
   - **æ‰‹åŠ¨**ï¼ˆæ¨èï¼‰â†’ å¼€æœºä¸å¯åŠ¨ï¼Œä½†å¯æ‰‹åŠ¨å¼€å¯  
     **æˆ–**
   - **ç¦ç”¨** â†’ å®Œå…¨ç¦æ­¢å¯åŠ¨ï¼ˆåŒ…æ‹¬æ‰‹åŠ¨ï¼‰
5. ç‚¹å‡» **åº”ç”¨** â†’ **ç¡®å®š**ã€‚

> âš ï¸ å¦‚æœå½“å‰æœåŠ¡æ­£åœ¨è¿è¡Œï¼Œå»ºè®®å…ˆç‚¹å‡» **â€œåœæ­¢â€** æŒ‰é’®å†ä¿®æ”¹å¯åŠ¨ç±»å‹ã€‚

---

### â–¶ æ‰‹åŠ¨å¯åŠ¨ / åœæ­¢ MySQL æœåŠ¡ï¼ˆéšæ—¶æ“ä½œï¼‰

- åœ¨ `services.msc` ä¸­ï¼š
  - å³é”® MySQL æœåŠ¡ â†’ **å¯åŠ¨**ï¼ˆStartï¼‰
  - å³é”® â†’ **åœæ­¢**ï¼ˆStopï¼‰
  - å³é”® â†’ **é‡æ–°å¯åŠ¨**ï¼ˆRestartï¼‰

---

## ğŸ’» æ–¹æ³•äºŒï¼šä½¿ç”¨å‘½ä»¤è¡Œï¼ˆç®¡ç†å‘˜æƒé™ï¼‰

### 1. æŸ¥çœ‹ MySQL æœåŠ¡åç§°

```cmd
sc queryex type= service | findstr /i "mysql"
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
SERVICE_NAME: MySQL84
```

### 2. ç¦æ­¢å¼€æœºè‡ªå¯ï¼ˆè®¾ä¸ºæ‰‹åŠ¨ï¼‰

```cmd
sc config MySQL84 start= demand
```

> `demand` è¡¨ç¤ºâ€œæ‰‹åŠ¨å¯åŠ¨â€ã€‚  
> æ³¨æ„ï¼š`start=` åé¢æœ‰ä¸€ä¸ªç©ºæ ¼ï¼

### 3. å®Œå…¨ç¦ç”¨ï¼ˆä¸æ¨èï¼Œé™¤éç¡®å®šä¸ç”¨ï¼‰

```cmd
sc config MySQL84 start= disabled
```

### 4. æ‰‹åŠ¨å¯åŠ¨ MySQL

```cmd
net start MySQL84
```

### 5. æ‰‹åŠ¨åœæ­¢ MySQL

```cmd
net stop MySQL84
```

> ğŸ“Œ æ›¿æ¢ `MySQL84` ä¸ºä½ å®é™…çš„æœåŠ¡åã€‚

---

## ğŸ” å¦‚ä½•ç¡®è®¤æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ

- é‡å¯ç”µè„‘åï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ â†’ â€œæœåŠ¡â€ æ ‡ç­¾ï¼Œæœç´¢ `MySQL`ï¼Œçœ‹çŠ¶æ€æ˜¯å¦ä¸ºâ€œå·²åœæ­¢â€ã€‚
- æˆ–è¿è¡Œï¼š
  ```cmd
  sc query MySQL84
  ```
  æŸ¥çœ‹ `STATE` å­—æ®µã€‚

---

## âœ… æ¨èåšæ³•ï¼ˆå¼€å‘åœºæ™¯ï¼‰

- å°†å¯åŠ¨ç±»å‹è®¾ä¸º **â€œæ‰‹åŠ¨â€**ï¼ˆ`demand`ï¼‰ï¼š
  - å¼€æœºä¸è‡ªåŠ¨å ç”¨å†…å­˜å’Œç«¯å£
  - éœ€è¦æ—¶æ‰‹åŠ¨ `net start MySQL84` å³å¯
  - ä¸å½±å“æ—¥å¸¸å¼€å‘ä½¿ç”¨

---

å¦‚æœä½ ä»¥åæƒ³æ¢å¤å¼€æœºè‡ªå¯ï¼Œåªéœ€å°†å¯åŠ¨ç±»å‹æ”¹å› **â€œè‡ªåŠ¨â€**ï¼š

```cmd
sc config MySQL84 start= auto
```

æˆ–åœ¨ `services.msc` ä¸­è®¾ç½®ä¸ºâ€œè‡ªåŠ¨â€ã€‚

---

## æ‰¹å¤„ç†è„šæœ¬å¯åŠ¨ / åœæ­¢ MySQL æœåŠ¡

å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œä¿å­˜ä¸º MySQL_Control.batï¼ˆæ³¨æ„åç¼€æ˜¯ .batï¼‰

```
@echo off
:: MySQL ä¸€é”®å¯åŠ¨/åœæ­¢è„šæœ¬ï¼ˆWindowsï¼‰
:: è‡ªåŠ¨æ£€æµ‹æœåŠ¡çŠ¶æ€å¹¶æ“ä½œ
:: æ”¯æŒå¸¸è§æœåŠ¡åï¼šMySQL84, MySQL80, MySQL57, MySQL

setlocal enabledelayedexpansion

:: æ£€æŸ¥æ˜¯å¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ
net session >nul 2>&1
if %errorLevel% NEQ 0 (
    echo è¯·ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ­¤è„šæœ¬ï¼
    echo.
    pause
    exit /b
)

:: å°è¯•æŸ¥æ‰¾ MySQL æœåŠ¡ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
set "mysql_service="
for %%s in (MySQL84 MySQL80 MySQL57 MySQL) do (
    sc query "%%s" >nul 2>&1
    if !errorlevel! EQU 0 (
        set "mysql_service=%%s"
        goto :found
    )
)
:found

if "%mysql_service%"=="" (
    echo æœªæ‰¾åˆ° MySQL æœåŠ¡ã€‚è¯·ç¡®è®¤æ˜¯å¦å·²å®‰è£… MySQLã€‚
    echo å¸¸è§æœåŠ¡åï¼šMySQL84, MySQL80, MySQL57
    pause
    exit /b
)

:: æŸ¥è¯¢å½“å‰æœåŠ¡çŠ¶æ€
for /f "tokens=4" %%a in ('sc query "%mysql_service%" ^| findstr "STATE"') do set "state=%%a"

cls
echo ==========================================
echo   MySQL æœåŠ¡æ§åˆ¶é¢æ¿
echo   æœåŠ¡åç§°: %mysql_service%
echo   å½“å‰çŠ¶æ€: %state%
echo ==========================================

if /i "%state%"=="RUNNING" (
    echo.
    echo [1] åœæ­¢ MySQL æœåŠ¡
    echo [2] é€€å‡º
    choice /c 12 /m "è¯·é€‰æ‹©æ“ä½œ"
    if errorlevel 2 exit /b
    if errorlevel 1 (
        net stop "%mysql_service%"
        echo.
        echo MySQL æœåŠ¡å·²åœæ­¢ã€‚
    )
) else (
    echo.
    echo [1] å¯åŠ¨ MySQL æœåŠ¡
    echo [2] é€€å‡º
    choice /c 12 /m "è¯·é€‰æ‹©æ“ä½œ"
    if errorlevel 2 exit /b
    if errorlevel 1 (
        net start "%mysql_service%"
        echo.
        echo MySQL æœåŠ¡å·²å¯åŠ¨ã€‚
    )
)

echo.
pause

```
